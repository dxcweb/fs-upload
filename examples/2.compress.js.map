{"version":3,"sources":["webpack:///./examples/2.compress.js"],"names":["Compress","state","originalSize","compressSize","dataURL","onUploadChange","files","i","file","push","size","compressImage","then","afterCompress","filesToDataURL","setState","render","padding","bind","border","width","marginTop","map","row","height","document","getElementById"],"mappings":";;;;;;;;;;;;;;;AAGA;;;;AACA;;;;AACA;;;;;;;;;;;;gfALA;;;;;KAMMA,Q;;;;;;;;;;;;iJACFC,K,GAAQ;AACJC,2BAAc,EADV;AAEJC,2BAAc,EAFV;AAGJC,sBAAS;AAHL,U;;;wBAMRC,c,2BAAeC,K,EAAO;AAAA;;AAClB;AACA;AACA;AACA,aAAMJ,eAAe,EAArB;AACA,cAAK,IAAIK,IAAI,CAAR,EAAWC,IAAhB,EAAsBA,OAAOF,MAAMC,CAAN,CAA7B,EAAuCA,GAAvC,EAA4C;AACxCL,0BAAaO,IAAb,CAAkBD,KAAKE,IAAvB;AACH;AACD,aAAMP,eAAe,EAArB;AACA,4BAAOQ,aAAP,CAAqBL,KAArB,EAA4BM,IAA5B,CAAiC,UAACC,aAAD,EAAkB;AAC/C,kBAAK,IAAIN,KAAI,CAAR,EAAWC,KAAhB,EAAsBA,QAAOK,cAAcN,EAAd,CAA7B,EAA+CA,IAA/C,EAAoD;AAChDJ,8BAAaM,IAAb,CAAkBD,MAAKE,IAAvB;AACH;AACD,gCAAOI,cAAP,CAAsBD,aAAtB,EAAqCD,IAArC,CAA0C,UAACR,OAAD,EAAY;AAClD,wBAAKW,QAAL,CAAc,EAACX,gBAAD,EAAUF,0BAAV,EAAwBC,0BAAxB,EAAd;AACH,cAFD;AAGH,UAPD;AASH,M;;wBAEDa,M,qBAAS;AAAA,sBACqC,KAAKf,KAD1C;AAAA,aACEG,OADF,UACEA,OADF;AAAA,aACUF,YADV,UACUA,YADV;AAAA,aACuBC,YADvB,UACuBA,YADvB;;AAEL,gBACI;AAAA;AAAA,eAAK,OAAO,EAACc,SAAQ,EAAT,EAAZ;AACI;AAAA;AAAA,mBAAQ,UAAU,KAAKZ,cAAL,CAAoBa,IAApB,CAAyB,IAAzB,CAAlB;AACQ,4BAAO,EAACD,SAAQ,CAAT,EAAWE,QAAO,WAAlB,EAA8BC,OAAO,GAArC,EAAyCC,WAAU,EAAnD,EADf;AAAA;AAAA,cADJ;AAKI,sDALJ;AAMKjB,qBAAQkB,GAAR,CAAY,UAACC,GAAD,EAAMhB,CAAN,EAAW;AACpB,wBAAO;AAAA;AAAA,uBAAK,KAAKA,CAAV;AACH;AAAA;AAAA;AAAA;AAAQL,sCAAaK,CAAb,CAAR;AAAA;AAAgCJ,sCAAaI,CAAb,CAAhC;AAAA;AAAA,sBADG;AAEH,4DAAK,KAAKgB,GAAV,EAAe,OAAO,EAACH,OAAM,GAAP,EAAWI,QAAO,GAAlB,EAAtB;AAFG,kBAAP;AAIH,cALA;AANL,UADJ;AAeH,M;;;;;AAEL,oBAASR,MAAT,CACI,8BAAC,QAAD,OADJ,EAEIS,SAASC,cAAT,CAAwB,iBAAxB,CAFJ,E","file":"2.compress.js","sourcesContent":["/**\n * Created by guowei on 17/3/31.\n */\nimport React, {Component, PropTypes} from 'react';\nimport ReactDOM from 'react-dom';\nimport Upload from 'fs-upload'\nclass Compress extends Component {\n    state = {\n        originalSize: [],\n        compressSize: [],\n        dataURL: [],\n    };\n\n    onUploadChange(files) {\n        //Upload.filesToDataURL(files).then((dataURL2)=> {\n        //    this.setState({dataURL2});\n        //});\n        const originalSize = [];\n        for (let i = 0, file; file = files[i]; i++) {\n            originalSize.push(file.size);\n        }\n        const compressSize = [];\n        Upload.compressImage(files).then((afterCompress)=> {\n            for (let i = 0, file; file = afterCompress[i]; i++) {\n                compressSize.push(file.size);\n            }\n            Upload.filesToDataURL(afterCompress).then((dataURL)=> {\n                this.setState({dataURL, originalSize, compressSize});\n            });\n        });\n\n    }\n\n    render() {\n        const {dataURL,originalSize,compressSize}=this.state;\n        return (\n            <div style={{padding:40}}>\n                <Upload onChange={this.onUploadChange.bind(this)}\n                        style={{padding:5,border:\"1px solid\",width: 150,marginTop:10}}>\n                    点击压缩图片上传\n                </Upload>\n                <br />\n                {dataURL.map((row, i)=> {\n                    return <div key={i}>\n                        <p>压缩前:{originalSize[i]}字节 压缩后:{compressSize[i]}字节</p>\n                        <img src={row} style={{width:200,height:200}}/>\n                    </div>\n                })}\n            </div>\n        )\n    }\n}\nReactDOM.render(\n    <Compress />,\n    document.getElementById('__react-content')\n);\n\n\n// WEBPACK FOOTER //\n// ./examples/2.compress.js"],"sourceRoot":""}